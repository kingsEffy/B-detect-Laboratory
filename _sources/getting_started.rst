.. _getting_started:

===============
Getting Started
===============


Current version of curation program only supports importing `pickle file <https://docs.python.org/3/library/pickle.html#:~:text=%E2%80%9CPickling%E2%80%9D%20is%20the%20process%20whereby,back%20into%20an%20object%20hierarchy.>`_.

The pickle file can be generated by using our provided preprocessing script or users' own python script.
The following is a list of all the variables that are essential for different data importing method.

.. Important::

  For a given pickle file, the data need to be stored under specific variable names and data types as listed below. 
  Warning will be raised if the data is not stored under the correct variable name or data type, or not the right file format.


Load unsorted data set
----------------------

* `filtered_data`

  `ndarray`: Raw data after filtering for spike detection. The filtered data is a 2D numpy array of shape (n_channels, n_samples). Unit of the data is Microvolt (µV).

* `sampling_rate`

  `int`: Sampling frequency of recording. 

* `dir_saved`

  `str`: The directory where the resulting files will be saved.

Load sorted data set
---------------------

* `dat`

  `ndarray`: Raw data after filtering for spike detection. The filtered data is a 2D numpy array of shape (1, n_samples). Unit of the data is Microvolt (µV).

* `sampling_rate`

  `int`: Sampling frequency of recording.

* `sample_nos`

  `ndarray`: Sample numbers collected during recording period of raw data. The sample numbers is a 1D numpy array of shape (n_samples,).

* `spk_wav_left_num` and `spk_wav_right_num`

  `int`: The `spk_wav_left_num` and `spk_wav_right_num` variables are calculated by multiplying the time before and after the spike by (sampling rate)/1000. These two values defining a window around each detected spike and converting this window from time to samples.

* `spk_wav`

  `ndarray`: Spike waveforms. The spike waveforms is a 2D numpy array of shape (n_spikes, n_samples of the window around each detected spike).

* `peak_pos`

  `ndarray`: The peak position of each spike waveform. The peak position is a 1D numpy array of shape (n_spikes,).


* `label`

  `ndarray`: The spike cluster ID of each spike waveform. The label is a 1D numpy array of shape (n_spikes,).

* `ISIs`

  `ndarray`: The inter-spike intervals of each spike waveform. The ISIs is a 1D numpy array of shape (n_spikes,).

* `neuron_of_interest`

  `int` : Neuorn of interest.

* `dir_saved`

  `str`: The directory where the resulting files will be saved.

Load Sample
------------

A sample data named `sample.pkl` will be loaded as a demonstration of using GUI for burst curation. Data format is same as `Sorted Data` option. 

.. Important::  
    In order to load it sucessfully, please place it under same directory as the program.  
    This file can be downloaded together with the program from  Dr. Hunt's lab `website <hhttps://www.cedars-sinai.edu/research/labs/hunt.html>`_.
